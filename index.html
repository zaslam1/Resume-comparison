<!DOCTYPE html>
<html>
<head>
    <title>Resume Matching</title>
</head>
<body>
    <h1>Upload Job Description and Resume</h1>
    
    <form id="job-description-form" enctype="multipart/form-data">
        <label for="job-description">Job Description:</label>
        <input type="file" id="job-description" name="file" accept=".txt,.pdf,.doc,.docx" required>
        <button type="submit">Upload Job Description</button>
    </form>
    
    <form id="resume-form" enctype="multipart/form-data" style="display:none;">
        <label for="resume">Resume:</label>
        <input type="file" id="resume" name="file" accept=".txt,.pdf,.doc,.docx" required>
        <button type="submit">Upload Resume</button>
    </form>
    
    <div id="results" style="display:none;">
        <h2>Results</h2>
        <p id="similarity-score"></p>
        <p id="interpretation"></p>
        <p id="recommendations"></p>
    </div>
    
    <script>
        const jobDescriptionForm = document.getElementById('job-description-form');
        const resumeForm = document.getElementById('resume-form');
        const resultsDiv = document.getElementById('results');

        jobDescriptionForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(jobDescriptionForm);
            const response = await fetch('https://aaf3-34-145-136-52.ngrok-free.app/upload_job_description', {
                method: 'POST',
                body: formData
            });
            const result = await response.json();
            if (result.message) {
                alert(result.message);
                resumeForm.style.display = 'block';
            } else {
                alert(result.error);
            }
        });

        resumeForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(resumeForm);
            const response = await fetch('YOUR_NGROK_URL/upload_resume', {
                method: 'POST',
                body: formData
            });
            const result = await response.json();
            if (result.similarity_score !== undefined) {
                resultsDiv.style.display = 'block';
                document.getElementById('similarity-score').innerText = `Similarity Score: ${result.similarity_score}`;
                document.getElementById('interpretation').innerText = result.interpretation;
                document.getElementById('recommendations').innerText = result.recommendations;
            } else {
                alert(result.error);
            }
        });
    </script>
</body>
</html>
